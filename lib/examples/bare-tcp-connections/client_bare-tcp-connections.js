// Generated by CoffeeScript 1.6.3
(function() {
  var conns, libTcp, maxConnections, measures, verkehr, _i, _results;

  verkehr = require("../../");

  libTcp = require("net");

  maxConnections = 5;

  measures = new verkehr.Measures();

  conns = 0;

  measures.addMeasure("connections", function(cb) {
    return cb(null, conns);
  });

  measures.start();

  (function() {
    _results = [];
    for (var _i = 0; 0 <= maxConnections ? _i < maxConnections : _i > maxConnections; 0 <= maxConnections ? _i++ : _i--){ _results.push(_i); }
    return _results;
  }).apply(this).forEach(function() {
    var conn;
    conn = libTcp.connect({
      port: 9999
    }, function() {
      return conns++;
    });
    return conn.on("end", function() {
      return conns--;
    });
  });

}).call(this);
